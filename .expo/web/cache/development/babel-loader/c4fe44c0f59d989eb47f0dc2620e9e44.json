{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport * as React from 'react';\nimport { StatusBar } from 'expo-status-bar';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { Audio } from 'expo-av';\nimport styles from \"./styles\";\nimport { Ionicons } from '@expo/vector-icons';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function DancaCadeira(_ref) {\n  var route = _ref.route,\n    navigation = _ref.navigation;\n  var game = route.params.game;\n  var _React$useState = React.useState(game),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    gameData = _React$useState2[0],\n    setGameData = _React$useState2[1];\n  var _React$useState3 = React.useState(),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    sound = _React$useState4[0],\n    setSound = _React$useState4[1];\n  var _React$useState5 = React.useState(false),\n    _React$useState6 = _slicedToArray(_React$useState5, 2),\n    gaming = _React$useState6[0],\n    setGaming = _React$useState6[1];\n  function getRandomInt(min, max) {\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    return Math.floor(Math.random() * (max - min) + min);\n  }\n  var songCurrentTime = 0;\n  function playing(_x, _x2, _x3) {\n    return _playing.apply(this, arguments);\n  }\n  function _playing() {\n    _playing = _asyncToGenerator(function* (numCadeiras, minTime, maxTime) {\n      var time = getRandomInt(minTime, maxTime);\n      var _yield$Audio$Sound$cr = yield Audio.Sound.createAsync(require(\"../../../../assets/audios/songs/song-1.mp3\")),\n        sound = _yield$Audio$Sound$cr.sound;\n      if (gaming) {\n        console.log('\\n');\n        console.log('Tempo: ' + time * 1000);\n        console.log('Cadeiras: ' + numCadeiras);\n        console.log('Current time: ' + songCurrentTime);\n        if (songCurrentTime !== 0) {\n          yield sound.playFromPositionAsync(songCurrentTime);\n        } else {\n          yield sound.playAsync();\n        }\n        console.log('Tocando música');\n        setTimeout(function () {\n          sound.pauseAsync();\n          console.log('Música pausada');\n          if (songCurrentTime !== 0) {\n            songCurrentTime = songCurrentTime + time * 1000;\n          } else {\n            songCurrentTime = time * 1000;\n          }\n          numCadeiras = numCadeiras - 1;\n          if (numCadeiras >= 1) {\n            console.log('Retirando cadeiras');\n            if (gaming) setTimeout(function () {\n              playing(numCadeiras, minTime, maxTime);\n            }, 7000);\n          } else {\n            console.log('\\n');\n            setGaming(false);\n            console.log('Fim do Jogo!');\n          }\n        }, time * 1000);\n      } else {\n        yield sound.pauseAsync();\n        console.log('Fim do Jogo!');\n        songCurrentTime = 0;\n        console.log('Current time: ' + songCurrentTime);\n      }\n    });\n    return _playing.apply(this, arguments);\n  }\n  var play = function play() {\n    setGaming(true);\n    console.log('Jogando: ' + gaming);\n  };\n\n  var stop = function stop() {\n    setGaming(false);\n    console.log('Jogando: ' + gaming);\n  };\n  React.useEffect(function () {\n    console.log('Jogando: ' + gaming);\n    return sound ? function () {\n      console.log('Unloading Sound');\n      sound.unloadAsync();\n    } : undefined;\n  }, [sound]);\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(StatusBar, {\n      style: \"light\"\n    }), _jsxs(View, {\n      style: [styles.header, {\n        backgroundColor: gameData.theme\n      }],\n      children: [_jsxs(View, {\n        style: styles.headerRow,\n        children: [_jsx(TouchableOpacity, {\n          style: styles.headerButton,\n          onPress: function onPress() {\n            return navigation.goBack();\n          },\n          activeOpacity: 0.6,\n          children: _jsx(Ionicons, {\n            style: styles.headerButtonIcon,\n            name: \"ios-chevron-back\"\n          })\n        }), _jsx(Text, {\n          style: styles.title,\n          children: gameData.name\n        })]\n      }), _jsx(View, {\n        style: styles.headerRow,\n        children: _jsx(TouchableOpacity, {\n          style: styles.headerButton,\n          onPress: function onPress() {\n            return alert('Settings');\n          },\n          activeOpacity: 0.6,\n          children: _jsx(Ionicons, {\n            style: styles.headerButtonIcon,\n            name: \"ios-settings-outline\"\n          })\n        })\n      })]\n    }), _jsxs(View, {\n      style: styles.bodyContainer,\n      children: [_jsx(View, {\n        style: styles.bodyContent\n      }), _jsx(View, {\n        style: styles.bodyFooter,\n        children: _jsx(TouchableOpacity, {\n          style: styles.startGameButton,\n          onPress: function onPress() {\n            return gaming ? stop() : play();\n          },\n          activeOpacity: 0.6,\n          children: _jsx(Text, {\n            style: styles.startGameButtonLabel,\n            children: gaming ? 'PARAR' : 'INICIAR'\n          })\n        })\n      })]\n    })]\n  });\n}","map":{"version":3,"names":["React","StatusBar","Audio","styles","Ionicons","DancaCadeira","route","navigation","game","params","useState","gameData","setGameData","sound","setSound","gaming","setGaming","getRandomInt","min","max","Math","ceil","floor","random","songCurrentTime","playing","numCadeiras","minTime","maxTime","time","Sound","createAsync","require","console","log","playFromPositionAsync","playAsync","setTimeout","pauseAsync","play","stop","useEffect","unloadAsync","undefined","container","header","backgroundColor","theme","headerRow","headerButton","goBack","headerButtonIcon","title","name","alert","bodyContainer","bodyContent","bodyFooter","startGameButton","startGameButtonLabel"],"sources":["E:/PROJECTS/- G I T H U B -/-DEVMASTER-/GoodGames/src/components/screens/games/DancaCadeira/index.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport { StatusBar } from 'expo-status-bar';\r\nimport { Text, View, TouchableOpacity } from 'react-native';\r\nimport { Audio } from 'expo-av';\r\n\r\nimport styles from './styles';\r\nimport { Ionicons } from '@expo/vector-icons';\r\n\r\nexport default function DancaCadeira ({ route, navigation }) {\r\n  \r\n  const { game } = route.params;\r\n\r\n  const [ gameData, setGameData ] = React.useState(game);\r\n  const [ sound, setSound ]: any = React.useState();\r\n  const [ gaming, setGaming ]: any = React.useState(false);\r\n  \r\n  function getRandomInt(min: number, max: number) {\r\n    min = Math.ceil(min);\r\n    max = Math.floor(max);\r\n    return Math.floor(Math.random() * (max - min) + min);\r\n  }\r\n  \r\n  var songCurrentTime = 0;\r\n\r\n  async function playing(numCadeiras: number, minTime: number, maxTime: number) {\r\n    var time: any = getRandomInt(minTime, maxTime);\r\n    const { sound } = await Audio.Sound.createAsync( require('../../../../assets/audios/songs/song-1.mp3') );\r\n\r\n\r\n    if (gaming) {\r\n      console.log('\\n');\r\n      console.log('Tempo: ' + time * 1000);\r\n      console.log('Cadeiras: ' + numCadeiras);\r\n      console.log('Current time: ' + songCurrentTime);\r\n      \r\n      if (songCurrentTime !== 0) {\r\n        await sound.playFromPositionAsync(songCurrentTime);\r\n      } else {\r\n        await sound.playAsync();\r\n      }\r\n  \r\n      console.log('Tocando música');\r\n      \r\n      setTimeout(() => {\r\n        sound.pauseAsync();\r\n        console.log('Música pausada');\r\n  \r\n        if (songCurrentTime !== 0) {\r\n          songCurrentTime = songCurrentTime + time * 1000;\r\n        } else {\r\n          songCurrentTime = time * 1000;\r\n        }\r\n  \r\n        numCadeiras = numCadeiras - 1;\r\n        \r\n        if (numCadeiras >= 1) {\r\n          console.log('Retirando cadeiras');\r\n          if (gaming) setTimeout(() =>{\r\n            playing(numCadeiras, minTime, maxTime);\r\n          }, 7000);\r\n        } else {\r\n          console.log('\\n');\r\n          setGaming(false);\r\n          console.log('Fim do Jogo!');\r\n        }\r\n      }, time * 1000);\r\n    } else {\r\n      await sound.pauseAsync();\r\n      console.log('Fim do Jogo!');\r\n      songCurrentTime = 0;\r\n      console.log('Current time: ' + songCurrentTime);\r\n    }\r\n  }\r\n\r\n  const play = () => {\r\n    // var numCadeiras: number = 10;\r\n    setGaming(true);\r\n    console.log('Jogando: ' + gaming);\r\n    // playing(numCadeiras, 10, 15);\r\n  }\r\n\r\n  const stop = () => {\r\n    setGaming(false);\r\n    console.log('Jogando: ' + gaming);\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    console.log('Jogando: ' + gaming);\r\n    return sound\r\n      ? () => {\r\n          console.log('Unloading Sound');\r\n          sound.unloadAsync();\r\n        }\r\n      : undefined;\r\n  }, [sound]);\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <StatusBar style=\"light\" />\r\n      {/* Header */}\r\n      <View style={[styles.header, {\r\n        backgroundColor: gameData.theme\r\n      }]}>\r\n        <View style={styles.headerRow}>\r\n          <TouchableOpacity \r\n            style={styles.headerButton} \r\n            onPress={() => navigation.goBack()} \r\n            activeOpacity={0.6}\r\n          >\r\n            <Ionicons style={styles.headerButtonIcon} name=\"ios-chevron-back\" />\r\n          </TouchableOpacity>\r\n          <Text style={styles.title}>{gameData.name}</Text>\r\n        </View>\r\n        <View style={styles.headerRow}>\r\n          <TouchableOpacity \r\n            style={styles.headerButton} \r\n            onPress={() => alert('Settings')} \r\n            activeOpacity={0.6}\r\n          >\r\n            <Ionicons style={styles.headerButtonIcon} name=\"ios-settings-outline\" />\r\n          </TouchableOpacity>\r\n        </View>\r\n      </View>\r\n      {/* Body */}\r\n      <View style={styles.bodyContainer}>\r\n        <View style={styles.bodyContent}>\r\n          \r\n        </View>\r\n        <View style={styles.bodyFooter}>\r\n          <TouchableOpacity \r\n            style={styles.startGameButton} \r\n            onPress={() => gaming ? stop() : play()} \r\n            activeOpacity={0.6}\r\n          >\r\n            <Text style={styles.startGameButtonLabel}>{gaming ? 'PARAR' : 'INICIAR'}</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n      </View>\r\n    </View>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}